<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bise.ecosystemservices">
<body>

<metal:main fill-slot="content-core">
  <metal:content-core define-macro="content-core">

  <div style="margin:0 auto;width:690px">
    <div style="text-align:center">Select what should be visible in the map</div>
    <div id="scale">
      <div class="disabled">Global</div>
      <div class="selected">European</div>
      <div class="disabled">National</div>
      <div class="disabled">Subnational</div>
    </div>
  </div>
  <div style="clear:both"></div>

  <div id="mapSelector">
    <div>Ecosystem: </div>
    <div>
      <select id="ecosystemSelector">
        <option value="empty" disabled selected>Select ecosytem</option>
        <optgroup label="Terrestrial">
          <tal:block tal:repeat="ecosystem view/get_ecosystems">
            <option tal:define="category ecosystem/item/category" 
              tal:condition="python:category == 1"  
              tal:attributes="value ecosystem/item/id; data-webmap ecosystem/item/webmapid"
              tal:content="ecosystem/item/title"></option>
          </tal:block>
        </optgroup>
        <optgroup label="Fresh water">
          <tal:block tal:repeat="ecosystem view/get_ecosystems">
            <option tal:define="category ecosystem/item/category" 
              tal:condition="python:category == 2"  
              tal:attributes="value ecosystem/item/id; data-webmap ecosystem/item/webmapid"
              tal:content="ecosystem/item/title"></option>
          </tal:block>
        </optgroup>       
        <optgroup label="Marine">
          <tal:block tal:repeat="ecosystem view/get_ecosystems">
            <option tal:define="category ecosystem/item/category" 
              tal:condition="python:category == 3"  
              tal:attributes="value ecosystem/item/id; data-webmap ecosystem/item/webmapid"
              tal:content="ecosystem/item/title"></option>
            </tal:block> 
        </optgroup>
      </select>
    </div>
    <div>Service: </div>
    <div>
      <select id="serviceSelector">
        <option value="empty" disabled selected>Select service</option>
          <optgroup label="Provisioning">
            <optgroup label="Nutrition" style="margin-left:15px">
              <tal:block tal:repeat="service view/get_services">
                <option tal:define="division service/item/division" 
                  tal:condition="python:division == 1"  
                  tal:attributes="value service/item/id; data-webmap service/item/webmapid"
                  tal:content="service/item/title"></option>
              </tal:block>
            </optgroup>
            <optgroup label="Materials">
              <tal:block tal:repeat="service view/get_services">
                <option tal:define="division service/item/division" 
                  tal:condition="python:division == 2"  
                  tal:attributes="value service/item/id; data-webmap service/item/webmapid"
                  tal:content="service/item/title"></option>
              </tal:block>
            </optgroup>    
            <optgroup label="Energy">
              <tal:block tal:repeat="service view/get_services">
                <option tal:define="division service/item/division" 
                  tal:condition="python:division == 3"  
                  tal:attributes="value service/item/id; data-webmap service/item/webmapid"
                  tal:content="service/item/title"></option>
              </tal:block>
            </optgroup>                     
          </optgroup>     
          <optgroup label="Regulation and maintenance">
            <optgroup label="Mediation of waste, toxics and other nuisances">
              <tal:block tal:repeat="service view/get_services">
                <option tal:define="division service/item/division" 
                  tal:condition="python:division == 4"  
                  tal:attributes="value service/item/id; data-webmap service/item/webmapid"
                  tal:content="service/item/title"></option>
              </tal:block>
            </optgroup>
            <optgroup label="Mediation of flows">
              <tal:block tal:repeat="service view/get_services">
                <option tal:define="division service/item/division" 
                  tal:condition="python:division == 5"  
                  tal:attributes="value service/item/id; data-webmap service/item/webmapid"
                  tal:content="service/item/title"></option>
              </tal:block>
            </optgroup>   
            <optgroup label="Maintenance of physical, chemical, biological conditions">
              <tal:block tal:repeat="service view/get_services">
                <option tal:define="division service/item/division" 
                  tal:condition="python:division == 6"  
                  tal:attributes="value service/item/id; data-webmap service/item/webmapid"
                  tal:content="service/item/title"></option>
              </tal:block>
            </optgroup>                      
          </optgroup>  
        
          <optgroup label="Cultural">
            <optgroup label="Physical and experiential interactions">
              <tal:block tal:repeat="service view/get_services">
                <option tal:define="division service/item/division" 
                  tal:condition="python:division == 7"  
                  tal:attributes="value service/item/id; data-webmap service/item/webmapid"
                  tal:content="service/item/title"></option>
              </tal:block>
            </optgroup> 
            <optgroup label="Spiritual, symbolic and other interactions">
              <tal:block tal:repeat="service view/get_services">
                <option tal:define="division service/item/division" 
                  tal:condition="python:division == 8"  
                  tal:attributes="value service/item/id; data-webmap service/item/webmapid"
                  tal:content="service/item/title"></option>
                </tal:block>
            </optgroup>             
          </optgroup>   
      </select>      
    </div>

  </div>

  <div style="clear:both"></div>
  <div id="mapSection" style="height:457px">
    <div id="title" style="font-weight:bold; margin: 10px 0; font-size:22px"></div>
    <div id="mainMap" style="width:80%;float:left;height: 400px"></div>
    <div id="legendContainer" style="width:20%; float:left;height:400px;overflow:auto"></div>
    <div id="attribution" style="clear:both"></div>
  </div>
  
  </metal:content-core>
</metal:main>

</body>
</html>

